({851:function(){var e=this&&this.__awaiter||function(e,t,i,l){return new(i||(i=Promise))((function(o,n){function r(e){try{c(l.next(e))}catch(e){n(e)}}function a(e){try{c(l.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}c((l=l.apply(e,t||[])).next())}))};const t=/(?:[-a-zA-Z0-9@:%_\+~.#=]{2,256}\.)?([-a-zA-Z0-9@:%_\+~#=]*)\.[a-z]{2,6}\b(?:[-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/i;chrome.storage.local.set({allTabs:[]});let i,l,o,n=0,r={id:0,domain:"",url:"",title:"",sec:0};function a(){return e(this,void 0,void 0,(function*(){let[e]=yield chrome.tabs.query({active:!0,lastFocusedWindow:!0});return e}))}const c=t=>e(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{chrome.storage.local.get(["allTabs"],(function(i){void 0===i.allTabs?t():e(i.allTabs)}))}))})),s=t=>e(this,void 0,void 0,(function*(){return new Promise(((e,i)=>{chrome.storage.local.set({allTabs:t},(function(){console.log(t)}))}))}));function d(t){return e(this,void 0,void 0,(function*(){if(yield function(t){return e(this,void 0,void 0,(function*(){let e=yield c();if(0!=e.length){for(let i=0;i<e.length;i++)if(e[i].domain===t)return console.log(e[i].domain+" "+t),!0;return!1}return!1}))}(t.domain)){console.log("loop"),i=t.url,l=t.title;let e=yield c();for(let i=0;i<e.length;i++)t.domain===e[i].domain&&(e[i].sec+=t.sec,yield s(e))}else{console.log("here"),i=t.url,l=t.title;let e=yield c();const o={id:t.id,domain:t.domain,url:t.url,title:t.title,sec:t.sec};e.push(o),yield s(e)}}))}chrome.tabs.onActivated.addListener((function(){return e(this,void 0,void 0,(function*(){if(clearInterval(o),console.log(`The total time was: ${n} seconds`),""===r.url){console.log("starting tab");let e=yield a();if(!1===e.url.includes("."))return void console.log("invalid tab");r={id:e.id,domain:`${e.url.match(t)[1]}`,url:e.url,sec:0,title:e.title},n=0,o=setInterval((()=>{n++}),1e3)}else{let e=r;e.sec=n;let i=yield a();if(!1===i.url.includes("."))return void console.log("invalid tab");r={id:i.id,domain:`${i.url.match(t)[1]}`,url:i.url,sec:0,title:i.title},n=0,o=setInterval((()=>{n++}),1e3),yield d(e)}}))})),chrome.tabs.onUpdated.addListener((function(i,l,c){return e(this,void 0,void 0,(function*(){if(null==i&&"complete"===c.status){clearInterval(o),console.log(`The total time was: ${n} seconds`),yield d(r),n=0,o=setInterval((()=>{n++}),1e3);let e=yield a();if(!1===e.url.includes("."))return void console.log("bad");r={id:e.id,domain:`${e.url.match(t)[1]}`,url:e.url,sec:0,title:e.title}}}))}))}})[851]();